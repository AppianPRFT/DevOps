<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<contentHaul xmlns:a="http://www.appian.com/ae/types/2009">
    <versionUuid>_a-0000df6a-d82f-8000-9ba2-011c48011c48_112443</versionUuid>
    <rule>
        <name>CTMS_Document_SiteDocumetApprover</name>
        <uuid>_a-0000dd28-e149-8000-daab-640000640000_10217</uuid>
        <description>Site Document approver for CTMS</description>
        <parentUuid>_a-0000dcd5-e7b4-8000-daab-640000640000_6355</parentUuid>
        <visibility>
            <advertise>false</advertise>
            <hierarchy>true</hierarchy>
            <indexable>true</indexable>
            <quota>false</quota>
            <searchable>true</searchable>
            <system>false</system>
            <unlogged>false</unlogged>
        </visibility>
        <definition>load(
  local!document: if(
    #"_a-0000dcfa-ab37-8000-daab-640000640000_7168"(
      index(ri!documentIdentifier,"documentIdentifier"," ")
    ),
    {},
    #"_a-0000dd28-aefc-8000-daab-640000640000_10091"(
      ID: ri!documentIdentifier
    )
    ),
  
  local!siteInfo: if(
    #"_a-0000dcfa-ab37-8000-daab-640000640000_7168"(
      local!document
    ),
    {
      'type!{urn:com:appian:types:CTMS}CTMS_SiteAccessView'
    },
    #"38c0b0ce-9c91-480f-9ee6-eda722584131"(
     (local!document.siteIdentifier)
    
    )
  ),
  
  local!Investigator: if(
    #"_a-0000dcfa-ab37-8000-daab-640000640000_7168"(
      local!document
    ),
    {
      'type!{urn:com:appian:types:CTMS}CTMS_InvestigatorAddress'
    },
    #"_a-0000ddcc-a4d5-8000-daab-640000640000_18473"(
      ID: local!document.siteIdentifier
    )
  ),
  local!UploadedDocument,
  with(
    #"SYSTEM_SYSRULES_formLayout_v1"(
      contents: {
        #"SYSTEM_SYSRULES_sectionLayout_v1"(
          label: "Site Details",
          contents: {
           
           #"SYSTEM_SYSRULES_textField"(
              label: "Protocol #",
              labelPosition: "ADJACENT",
              value: index(local!siteInfo,"protocolsNumber"," "),
              readOnly: true
              
            ),
            
            
            #"SYSTEM_SYSRULES_textField"(
              label: "Site #",
              labelPosition: "ADJACENT",
              value: index(local!siteInfo,"Site #"," "),
              readOnly: true
            ),
            #"SYSTEM_SYSRULES_textField"(
              label: "Site Status",
              labelPosition: "ADJACENT",
              value: index(local!siteInfo,"siteStatus"," "),
              readOnly: true
            ),
         #"SYSTEM_SYSRULES_textField"(
              label: "Account Name",
              labelPosition: "ADJACENT",
              value: index(local!siteInfo,"accountName"," "),
              readOnly: true
            ),
            #"SYSTEM_SYSRULES_textField"(
              label: "# Planned Subjects",
              labelPosition: "ADJACENT",
              value: index(local!siteInfo,"plannedSubjects"," "),
              readOnly: true
            ),
            #"SYSTEM_SYSRULES_textField"(
              label: "PI",
              labelPosition: "ADJACENT",
              value: index(local!Investigator,"firstName"," ")&amp; " " &amp; index(local!Investigator,"lastName"," "),
              readOnly: true
            )
          }
        ),
        #"SYSTEM_SYSRULES_sectionLayout_v1"(
          label: "Upload Document",
          contents: {
            #"SYSTEM_SYSRULES_textField"(
              label: "Document Identifier",
              labelPosition: "ADJACENT",
              value: index(local!document,"documentIdentifier"," "),
              saveInto: local!document.documentIdentifier,
              readOnly: ri!isReadOnly
            ),
            #"SYSTEM_SYSRULES_dateField"(
              label: "Expiration Date",
              labelPosition: "ADJACENT",
              value: index(local!document,"expirationDate"," "),
              saveInto: local!document.expirationDate,
              readOnly: ri!isReadOnly
            ),
         
            #"SYSTEM_SYSRULES_textField"(
              label: "Document Type",
              labelPosition: "ADJACENT",
              value: index(local!document,"documentType"," "),
              saveInto: local!document.documentType,
              readOnly: ri!isReadOnly
            ),
            
          }
        ),
        #"SYSTEM_SYSRULES_sectionLayout_v1"(
          contents: {
            #"SYSTEM_SYSRULES_paragraphField"(
              label: "Description",
              labelPosition: "ADJACENT",
              value: index(local!document,"documentDescription",""),
              saveInto: local!document.documentDescription,
              readOnly: ri!isReadOnly
            ),
            if(
              #"_a-0000dcfa-ab37-8000-daab-640000640000_7168"(
                local!document.documentId
              ),
              {},
              #"SYSTEM_SYSRULES_linkField"(
                label: "Saved Document",
                labelPosition: "ADJACENT",
                instructions: "Click on the link to download",
                links: {
                  #"SYSTEM_SYSRULES_documentDownloadLink"(
                    label: if(
                      #"_a-0000dcfa-ab37-8000-daab-640000640000_7168"(
                        local!document.documentId
                      ),
                      {
                        "Download Document"
                      },
                      document(
                        local!document.documentId,
                        "name"
                      )
                    ),
                    document: todocument(
                      local!document.documentId
                    )
                  )
                }
              )
            ),
            if(
              #"_a-0000dcfa-ab37-8000-daab-640000640000_7168"(
                ri!UploadedDocument
              ),
              {},
              #"SYSTEM_SYSRULES_linkField"(
                label: "New Document",
                labelPosition: "ADJACENT",
                instructions: "Click on the link to download",
                links: {
                  #"SYSTEM_SYSRULES_documentDownloadLink"(
                    label: document(
                      ri!UploadedDocument,
                      "name"
                    ),
                    document: ri!UploadedDocument
                  )
                }
              )
            ),
            if(
              #"_a-0000dcfa-ab37-8000-daab-640000640000_7168"(
                ri!expirationDate
              ),
              {},
              #"SYSTEM_SYSRULES_dateField"(
                label: "New Document Expiration Date",
                labelPosition: "ADJACENT",
                value: ri!expirationDate,
                saveInto: ri!expirationDate,
                readOnly: true
              )
            ),
          #"SYSTEM_SYSRULES_paragraphField"(
              label: "Comment",
              labelPosition: "ADJACENT",
              value: ri!requesterComment,
              saveInto: ri!requesterComment,
              readOnly: true
            ),
            #"SYSTEM_SYSRULES_paragraphField"(
              label: "Approver Comment",
              labelPosition: "ADJACENT",
              value: ri!approverComment,
              saveInto: ri!approverComment,
              required: true,
              readOnly: false
            )
          }
        )
      },
      buttons: {
        #"SYSTEM_SYSRULES_ButtonLayout"(
          primaryButtons: {
            #"SYSTEM_SYSRULES_ButtonWidgetSubmit"(
              label: "Approve",
              style: "PRIMARY",
              value: "Approve",
              saveInto: ri!btnAction
            )
          },
          secondaryButtons: {
            #"SYSTEM_SYSRULES_ButtonWidgetSubmit"(
              label: "Cancel",
              value: "Cancel",
              saveInto: {
                ri!btnAction
              },
              skipValidation: true
            ),
            #"SYSTEM_SYSRULES_ButtonWidgetSubmit"(
              label: "Reject",
              style: "DESTRUCTIVE",
              value: "Reject",
              saveInto: {
                ri!btnAction
              }
            )
          }
        )
      }
    )
  )
)</definition>
        <namedTypedValue>
            <name>documentIdentifier</name>
            <type>
                <name>string</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
            <value/>
        </namedTypedValue>
        <namedTypedValue>
            <name>btnAction</name>
            <type>
                <name>string</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
            <value/>
        </namedTypedValue>
        <namedTypedValue>
            <name>isReadOnly</name>
            <type>
                <name>boolean</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>UploadedDocument</name>
            <type>
                <name>CollaborationDocument</name>
                <namespace>http://www.appian.com/ae/types/2009</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>requesterComment</name>
            <type>
                <name>string</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
            <value/>
        </namedTypedValue>
        <namedTypedValue>
            <name>approverComment</name>
            <type>
                <name>string</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
            <value/>
        </namedTypedValue>
        <namedTypedValue>
            <name>latestDocument</name>
            <type>
                <name>CollaborationDocument</name>
                <namespace>http://www.appian.com/ae/types/2009</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>expirationDate</name>
            <type>
                <name>date</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <metadataExpr></metadataExpr>
        <preferredEditor>interface</preferredEditor>
        <offlineEnabled>false</offlineEnabled>
    </rule>
    <roleMap public="true">
        <role inherit="true" allowForAll="false" name="readers">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="authors">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="administrators">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyReaders">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAuthors">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAdministrators">
            <users/>
            <groups/>
        </role>
    </roleMap>
    <typedValue>
        <type>
            <name>RuleTestConfig?list</name>
            <namespace>http://www.appian.com/ae/types/2009</namespace>
        </type>
        <value>
            <el>
                <a:name/>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xsd:string">1-1NFLB</a:value>
                    <a:nameRef>documentIdentifier</a:nameRef>
                    <a:id/>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xsd:string"/>
                    <a:nameRef>btnAction</a:nameRef>
                    <a:id/>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xsd:boolean">true</a:value>
                    <a:nameRef>isReadOnly</a:nameRef>
                    <a:id/>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="a:CollaborationDocument">_a-0000dd3a-dada-8000-daab-640000640000_11171</a:value>
                    <a:nameRef>UploadedDocument</a:nameRef>
                    <a:id/>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xsd:string"/>
                    <a:nameRef>requesterComment</a:nameRef>
                    <a:id/>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xsd:string"/>
                    <a:nameRef>approverComment</a:nameRef>
                    <a:id/>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="a:CollaborationDocument"/>
                    <a:nameRef>latestDocument</a:nameRef>
                    <a:id/>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="xsd:date"/>
                    <a:nameRef>expirationDate</a:nameRef>
                    <a:id/>
                </a:ruleInputTestConfigs>
                <a:assertions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
            </el>
        </value>
    </typedValue>
    <history>
        <historyInfo versionUuid="_a-0000df6a-d82f-8000-9ba2-011c48011c48_112443"/>
    </history>
</contentHaul>
