<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<contentHaul xmlns:a="http://www.appian.com/ae/types/2009">
    <versionUuid>_a-0000df6a-d82f-8000-9ba2-011c48011c48_112437</versionUuid>
    <rule>
        <name>CTMS_Document_SiteDocumetDshaboard</name>
        <uuid>_a-0000dd26-de8a-8000-daab-640000640000_10086</uuid>
        <description>Site Document dashboard for CTMS</description>
        <parentUuid>_a-0000dcd5-e7b4-8000-daab-640000640000_6355</parentUuid>
        <visibility>
            <advertise>false</advertise>
            <hierarchy>true</hierarchy>
            <indexable>true</indexable>
            <quota>false</quota>
            <searchable>true</searchable>
            <system>false</system>
            <unlogged>false</unlogged>
        </visibility>
        <definition>load(
  local!CTMS_USER: #"_a-0000ddcc-a4d5-8000-daab-640000640000_18500"(
    ID: ri!ID
  ),
  local!CTMS_SiteDocument: #"_a-0000def6-d094-8000-9ba2-011c48011c48_36388"(ri!documentIdentifier),
  local!document: if(
    #"_a-0000dcfa-ab37-8000-daab-640000640000_7168"(
      ri!documentIdentifier
    ),
    {},
    #"_a-0000dd28-aefc-8000-daab-640000640000_10091"(
      ID: ri!documentIdentifier
    )[1]
  ),
 
  local!currentMilestone: #"_a-0000ddf1-7abf-8000-daab-640000640000_21744"(
    username: local!CTMS_USER.userName,
    process: "Upload Document"
  ).milestone,
  local!siteDocumentDetails:#"_a-0000def6-d094-8000-9ba2-011c48011c48_36388"(ID:ri!documentIdentifier),
  local!UploadedDocument,
  with(
    local!Submit:#"_a-0000dd28-e149-8000-daab-640000640000_10155"(
      btnAction: "Submit"
    ),
    #"SYSTEM_SYSRULES_formLayout"(
      firstColumnContents: {
        #"SYSTEM_SYSRULES_sectionLayout"(
          label: "Document Details",
          firstColumnContents: {
            #"SYSTEM_SYSRULES_textField"(
              label: "Document Identifier",
              labelPosition: "ADJACENT",
              value: local!document.documentIdentifier,
              saveInto: local!document.documentIdentifier,
              readOnly: ri!isReadOnly
            ),
            if(
              #"_a-0000ddcb-815e-8000-daab-640000640000_18403"(
                local!document.expirationDate
              ),
              {},
              #"SYSTEM_SYSRULES_imageField"(
                label: "Document Status",
                labelPosition: "ADJACENT",
                images: {
                  #"99fbaef6-d7e6-4300-ac33-54df6eb73bfd"(
                    input: local!document.expirationDate
                  )
                },
                size: "ICON"
              )
            ),
            #"SYSTEM_SYSRULES_linkField"(
              label: "Site",
              labelPosition: "ADJACENT",
              instructions: "Click link to view Site",
              links: {
                #"SYSTEM_SYSRULES_recordLink"(
                  label: local!document.siteIdentifier,
                  recordType: #"_a-0000dcfa-ab37-8000-daab-640000640000_7030",
                  identifier: local!document.siteIdentifier
                )
              }
            ),
            #"SYSTEM_SYSRULES_linkField"(
              label: "Document List",
              labelPosition: "ADJACENT",
              instructions: "Go to Document List",
              links: {
                #"SYSTEM_SYSRULES_recordLink"(
                  label: "Return To Documents",
                  recordtype: #"_a-0000dcfa-ab37-8000-daab-640000640000_7030",
                  identifier: local!document.siteIdentifier,
                  dashboard: "_1mZnUw")
              }
            )
          },
          secondColumnContents: {
            #"SYSTEM_SYSRULES_textField"(
              label: "Document Type",
              labelPosition: "ADJACENT",
              value: local!document.documentType,
              saveInto: local!document.documentType,
              readOnly: ri!isReadOnly
            ),
            #"SYSTEM_SYSRULES_dateField"(
              label: "Expiration Date",
              labelPosition: "ADJACENT",
              value: local!document.expirationDate,
              saveInto: local!document.expirationDate,
              readOnly: ri!isReadOnly,
              validations: if(
                or(
                  #"_a-0000dcfa-ab37-8000-daab-640000640000_7168"(
                    local!document.expirationDate
                  ),
                  local!document.expirationDate &lt; today()
                ),
                "Date Expired",
                {}
              )
            )
          }
        ),
        #"SYSTEM_SYSRULES_sectionLayout"(
          firstColumnContents: {
            #"SYSTEM_SYSRULES_paragraphField"(
              label: "Description",
              labelPosition: "ADJACENT",
              value: local!document.documentDescription,
              saveInto: local!document.documentDescription,
              readOnly: ri!isReadOnly
            ),
            #"SYSTEM_SYSRULES_paragraphField"(
              label: "TEST",
              labelPosition: "ADJACENT",
              value: local!currentMilestone,
              readOnly: true
            ),
            if(
              #"_a-0000dcfa-ab37-8000-daab-640000640000_7168"(
                local!document.documentId
              ),
              {},
              #"SYSTEM_SYSRULES_linkField"(
                label: "Attached Document",
                labelPosition: "ADJACENT",
                links: {
                  #"SYSTEM_SYSRULES_documentDownloadLink"(
                    label: if(
                      #"_a-0000dcfa-ab37-8000-daab-640000640000_7168"(
                        local!document.documentId
                      ),
                      {},
                      document(
                        tointeger(local!document.documentId),
                        "name"
                      )
                    ),
                    document: todocument(
                      local!document.documentId
                    )
                  )
                }
              )
            )
          },
          secondColumnContents: {
            /*a!textField(readonly:true)*/
            
          }
        ),
        if(
            #"_a-0000dcfa-ab37-8000-daab-640000640000_7168"(
              local!currentMilestone
            ),
            
            {},
            if(
              index(local!siteDocumentDetails,"documentDescription",null)="InProgress",
             #"SYSTEM_SYSRULES_milestoneField"(
              steps: #"_a-0000ddf1-7abf-8000-daab-640000640000_21702",
              links: {},
              active: local!currentMilestone,
              showWhen:local!Submit
              
              ),{})
              
       
            )
           
          })
    )
  )
</definition>
        <namedTypedValue>
            <name>documentIdentifier</name>
            <type>
                <name>string</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
            <value/>
        </namedTypedValue>
        <namedTypedValue>
            <name>btnAction</name>
            <type>
                <name>string</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
            <value/>
        </namedTypedValue>
        <namedTypedValue>
            <name>isReadOnly</name>
            <type>
                <name>boolean</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>id</name>
            <type>
                <name>string</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
            <value/>
        </namedTypedValue>
        <metadataExpr></metadataExpr>
        <preferredEditor>interface</preferredEditor>
        <offlineEnabled>false</offlineEnabled>
    </rule>
    <roleMap public="true">
        <role inherit="true" allowForAll="false" name="readers">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="authors">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="administrators">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyReaders">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAuthors">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAdministrators">
            <users/>
            <groups/>
        </role>
    </roleMap>
    <typedValue>
        <type>
            <name>RuleTestConfig?list</name>
            <namespace>http://www.appian.com/ae/types/2009</namespace>
        </type>
        <value>
            <el>
                <a:name/>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xsd:string">1-1NFLB</a:value>
                    <a:nameRef>documentIdentifier</a:nameRef>
                    <a:id/>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xsd:string"/>
                    <a:nameRef>btnAction</a:nameRef>
                    <a:id/>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xsd:boolean">false</a:value>
                    <a:nameRef>isReadOnly</a:nameRef>
                    <a:id/>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xsd:string"/>
                    <a:nameRef>id</a:nameRef>
                    <a:id/>
                </a:ruleInputTestConfigs>
                <a:assertions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
            </el>
        </value>
    </typedValue>
    <history>
        <historyInfo versionUuid="_a-0000df6a-d82f-8000-9ba2-011c48011c48_112437"/>
    </history>
</contentHaul>
